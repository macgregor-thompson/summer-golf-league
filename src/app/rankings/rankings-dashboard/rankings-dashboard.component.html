<ngx-loading [show]="spinner"></ngx-loading>

<h1 class="text-center">Team Rankings</h1>


<div class="button-row text-right">
  <mat-form-field>
    <mat-select [(value)]="chartType">
      <mat-option [value]="ChartTypes.NumberCard">Number Card Chart</mat-option>
      <mat-option [value]="ChartTypes.Bar">Bar Chart</mat-option>
      <mat-option [value]="ChartTypes.Pie">Pie Chart</mat-option>
      <mat-option [value]="ChartTypes.AdvancedPie">Advanced Pie Chart</mat-option>
      <mat-option [value]="ChartTypes.PieGrid">Pie Grid Chart</mat-option>
    </mat-select>
  </mat-form-field>
</div>

<div class="chart-div" *ngIf="points.length">
  <ngx-charts-number-card
    *ngIf="chartType === ChartTypes.NumberCard"
    [scheme]="colorScheme"
    [results]="points"
    (select)="onSelect($event)">
  </ngx-charts-number-card>

  <ngx-charts-bar-vertical
    *ngIf="chartType === ChartTypes.Bar"
    [scheme]="colorScheme"
    [results]="points"
    [gradient]="gradient"
    [xAxis]="showXAxis"
    [yAxis]="showYAxis"
    [legend]="showLegend"
    [showXAxisLabel]="showXAxisLabel"
    [showYAxisLabel]="showYAxisLabel"
    [xAxisLabel]="xAxisLabel"
    [yAxisLabel]="yAxisLabel"
    (select)="onSelect($event)">
  </ngx-charts-bar-vertical>

  <ngx-charts-pie-chart
    *ngIf="chartType === ChartTypes.Pie"
    [scheme]="colorScheme"
    [results]="points"
    [legend]="true"
    [labels]="true"
    (select)="onSelect($event)">
  </ngx-charts-pie-chart>

  <ngx-charts-advanced-pie-chart
    *ngIf="chartType === ChartTypes.AdvancedPie"
    [scheme]="colorScheme"
    [results]="points"
    (select)="onSelect($event)">
  </ngx-charts-advanced-pie-chart>

  <ngx-charts-pie-grid
    *ngIf="chartType === ChartTypes.PieGrid"
    [scheme]="colorScheme"
    [results]="points"
    (select)="onSelect($event)">
  </ngx-charts-pie-grid>

</div>


<h1 class="text-center" style="margin-bottom: 30px;">Individual Rankings</h1>

<div class="table-container mat-elevation-z8" *ngIf="golfers">
  <mat-table #table [dataSource]="golfers" matSort matSortActive="displayName">
    <ng-container matColumnDef="ranking">
      <mat-header-cell *matHeaderCellDef mat-sort-header> Ranking</mat-header-cell>
      <mat-cell *matCellDef="let golfer; let i = index;">{{golfer.rank}}</mat-cell>
    </ng-container>
    <ng-container matColumnDef="displayName">
      <mat-header-cell *matHeaderCellDef mat-sort-header> Player</mat-header-cell>
      <mat-cell *matCellDef="let golfer">{{golfer.displayName}}</mat-cell>
    </ng-container>
    <ng-container matColumnDef="points">
      <mat-header-cell *matHeaderCellDef mat-sort-header> Points</mat-header-cell>
      <mat-cell *matCellDef="let golfer">{{golfer.points}}</mat-cell>
    </ng-container>
    <!-- <ng-container matColumnDef="matches">
       <mat-header-cell *matHeaderCellDef mat-sort-header> Matches</mat-header-cell>
       <mat-cell *matCellDef="let golfer"> {{golfer.matches.length}}</mat-cell>
     </ng-container>-->
    <ng-container matColumnDef="team">
      <mat-header-cell *matHeaderCellDef mat-sort-header> Team</mat-header-cell>
      <mat-cell *matCellDef="let golfer">
        <app-team-chip [team]="filterTeam(golfer.teamId)"></app-team-chip>
      </mat-cell>
    </ng-container>
    <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
    <mat-row
      *matRowDef="let row; columns: displayedColumns; let i = index; let isOdd = odd; let isEven = even; let isLast = last"></mat-row>
  </mat-table>
</div>
