<ngx-loading [show]="spinner"></ngx-loading>

<div class="week-picker-card">
  <div>
    <h1>
      Week {{weekSelected?.number}}
      <small class="text-muted">({{weekSelected?.date | date: 'longDate'}})</small>
    </h1>
  </div>
  <div>
    <mat-form-field>
      <mat-select [value]="weekSelected" (change)="onWeekChange($event)">
        <mat-option *ngFor="let week of weeks" [value]="week">
          Week {{ week.number }}
        </mat-option>
      </mat-select>
    </mat-form-field>
  </div>
</div>

<mat-accordion class="table-headers-align">
  <mat-expansion-panel *ngFor="let golfer of golfers | async; let i = index; let first = first; let last = last"
                       [expanded]="step === i" (opened)="setStep(i)" hideToggle="true">
    <mat-expansion-panel-header color="pimary">
      <mat-panel-title>
        {{golfer.displayName}}
      </mat-panel-title>
      <mat-panel-description>
        Gross: {{weeklyTotals[golfer.id]}}
        |
        Net: {{weeklyNet[golfer.id]}}
        <mat-chip-list class="team-colors">
          <mat-chip selected="true" [color]="golfer.team.color">{{golfer.team.name}}</mat-chip>
        </mat-chip-list>
      </mat-panel-description>
    </mat-expansion-panel-header>

     <app-scorecard *ngIf="rounds" [round]="rounds | filterRound: golfer.id"></app-scorecard>

    <mat-action-row>
      <button mat-button (click)="prevStep()" *ngIf="!first">Previous</button>
      <button mat-button color="warn" (click)="nextStep()" *ngIf="!last">Next</button>
    </mat-action-row>
  </mat-expansion-panel>
</mat-accordion>
